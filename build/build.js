!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);var r=wp.i18n.__,n=wp.blocks.serialize,l=wp.compose.compose,c=wp.data.withSelect,i=wp.editPost.PluginBlockSettingsMenuItem,a=l([c((function(e){var t=e("core/block-editor"),o=t.getSelectedBlockCount,r=t.getSelectedBlock,n=t.getMultiSelectedBlocks;return{blocks:1===o()?r():n()}}))])((function(e){var t=e.blocks;return wp.element.createElement(i,{icon:"share-alt2",label:r("Export as JSON"),onClick:function(){if(t){var e=n(t);e=JSON.stringify({type:"blocks_export",version:2,content:e},null,2);var o=new Blob([e],{type:"text/json"}),r=document.createEvent("MouseEvents"),l=document.createElement("a");l.download="blocks-export.json",l.href=window.URL.createObjectURL(o),l.dataset.downloadurl=["text/json",l.download,l.href].join(":"),r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),l.dispatchEvent(r)}}})})),p=wp.i18n.__,u=wp.components.Placeholder,s=wp.compose.compose,f=wp.components,d=f.DropZone,m=f.DropZoneProvider,b=f.FormFileUpload,w=wp.data,k=w.withDispatch,v=w.withSelect,y=wp.element.useEffect,g=s([v((function(e,t){var o=t.clientId,r=e("core/editor").canUserUseUnfilteredHTML;return{block:(0,(e("core/block-editor")||e("core/editor")).getBlock)(o),canUserUseUnfilteredHTML:r()}})),k((function(e,t){var o=t.block;t.canUserUseUnfilteredHTML;return{importBlock:function(t){return e("core/block-editor").replaceBlocks(o.clientId,t)}}}))])((function(e){var t=e.attributes,o=e.importBlock;y((function(){return r(t.file)}),[]);var r=function(e){var t=e[0];if("application/json"===t.type){var r=new FileReader;r.onload=function(){return o(JSON.parse(r.result))},r.readAsText(t)}};return wp.element.createElement(u,{label:"Import Blocks from JSON",instructions:"Upload JSON file from your device.",icon:"category"},wp.element.createElement(m,null,wp.element.createElement(b,{accept:"text/json",onChange:function(e){return r(e.target.files)},isSecondary:!0},p("Upload")),wp.element.createElement(d,{label:p("Import from JSON"),onFilesDrop:r})))})),S=wp.i18n.__,O=wp.blocks,j=O.createBlock,x=O.registerBlockType,U=wp.plugins.registerPlugin;x("blocks-export-import/importer",{title:S("Import Blocks from JSON"),description:S("Allows you import blocks from a JSON file."),icon:"category",category:"widgets",keywords:[S("JSON"),S("Importer"),S("Import")],attributes:{file:{type:"object"}},transforms:{from:[{type:"files",isMatch:function(e){return"application/json"===e[0].type},transform:function(e){return j("blocks-export-import/importer",{file:e})}}]},edit:g,save:function(){return null}}),U("blocks-export-import",{render:a})}]);